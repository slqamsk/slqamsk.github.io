<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ - –ü—Ä–æ–µ–∫—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            font-size: 12px;
        }
        .gantt-container {
            width: 100%;
            overflow-x: auto;
            position: relative;
            margin-top: 20px;
        }
        .timeline {
            display: flex;
            margin-left: 300px;
            border-bottom: 1px solid #ccc;
            background: #f5f5f5;
        }
        .day {
            width: 40px;
            text-align: center;
            border-right: 1px solid #ddd;
            padding: 5px 0;
            font-weight: bold;
        }
        .tasks {
            position: relative;
        }
        .task {
            display: flex;
            align-items: center;
            margin: 1px 0;
            height: 22px;
            border-bottom: 1px solid #f0f0f0;
        }
        .task.hidden {
            display: none;
        }
        .task-label {
            width: 300px;
            padding: 0 10px;
            position: absolute;
            left: 0;
            background: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }
        .task-bar-container {
            margin-left: 300px;
            position: relative;
            height: 22px;
        }
        .task-bar {
            height: 16px;
            background: #4CAF50;
            border-radius: 2px;
            position: absolute;
            border: 1px solid #388E3C;
            margin-top: 2px;
        }
        
        /* –£—Ä–æ–≤–Ω–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ */
        .level-1 { 
            font-weight: bold; 
            background: #e3f2fd; 
            height: 26px;
        }
        .level-2 { 
            font-weight: bold; 
            background: #f3e5f5;
        }
        .level-3 { 
            font-weight: normal;
            background: #e8f5e8;
        }
        .level-4 { 
            font-weight: normal;
            font-style: italic;
            background: #fff3e0;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è */
        .collapse-icon {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 5px;
            text-align: center;
            line-height: 10px;
            border: 1px solid #666;
            border-radius: 2px;
            font-size: 10px;
            cursor: pointer;
        }
        .collapse-icon::before {
            content: '-';
        }
        .collapsed .collapse-icon::before {
            content: '+';
        }
        
        .milestone {
            background: #FF9800 !important;
            border-color: #F57C00 !important;
            width: 4px !important;
            height: 20px !important;
        }
        
        /* –¶–≤–µ—Ç–∞ —Ñ–∞–∑ */
        .phase-1 { background: #4CAF50; border-color: #388E3C; }
        .phase-2 { background: #2196F3; border-color: #1976D2; }
        .phase-3 { background: #9C27B0; border-color: #7B1FA2; }
        .phase-4 { background: #FF5722; border-color: #D84315; }
        .phase-5 { background: #607D8B; border-color: #455A64; }
        
        .legend {
            display: flex;
            margin: 20px 0;
            gap: 15px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 15px;
            height: 15px;
            border: 1px solid #000;
        }
        
        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */
        .task-label:hover::after {
            content: attr(title);
            position: absolute;
            left: 0;
            top: 100%;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            white-space: nowrap;
            z-index: 1000;
            font-size: 11px;
        }
        
        .controls {
            margin: 10px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        .control-btn {
            padding: 5px 10px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
        .control-btn:hover {
            background: #1976D2;
        }
        .level-controls {
            display: flex;
            gap: 5px;
            margin-left: 10px;
        }
        .level-btn {
            padding: 5px 8px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
        .level-btn:hover {
            background: #45a049;
        }
        .controls-label {
            font-size: 11px;
            color: #666;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>–î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ - –ü—Ä–æ–µ–∫—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
    
    <div class="controls">
        <button class="control-btn" onclick="expandAll()">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</button>
        <button class="control-btn" onclick="collapseAll()">–°–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ</button>
        <span class="controls-label">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–æ —É—Ä–æ–≤–Ω—è:</span>
        <div class="level-controls">
            <button class="level-btn" onclick="expandToLevel(1)">1</button>
            <button class="level-btn" onclick="expandToLevel(2)">2</button>
            <button class="level-btn" onclick="expandToLevel(3)">3</button>
            <button class="level-btn" onclick="expandToLevel(4)">4</button>
        </div>
    </div>
    
    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: #4CAF50;"></div>
            <span>–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #2196F3;"></div>
            <span>–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #9C27B0;"></div>
            <span>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #FF5722;"></div>
            <span>–ê–Ω–∞–ª–∏–∑</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #607D8B;"></div>
            <span>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ</span>
        </div>
    </div>
    
    <div class="gantt-container">
        <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ -->
        <div class="timeline" id="timeline">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
        </div>
        
        <!-- –ó–∞–¥–∞—á–∏ -->
        <div class="tasks" id="tasks">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
        </div>
    </div>
    
    <div style="margin-top: 40px; font-size: 10px; color: #666;">
        <p><strong>–ü–æ—è—Å–Ω–µ–Ω–∏—è:</strong></p>
        <ul>
            <li>–û–¥–∏–Ω –¥–µ–Ω—å = 40 –ø–∏–∫—Å–µ–ª–µ–π</li>
            <li>–¶–≤–µ—Ç–∞ –æ–±–æ–∑–Ω–∞—á–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–∞–∑—ã –ø—Ä–æ–µ–∫—Ç–∞</li>
            <li>–û—Ä–∞–Ω–∂–µ–≤–∞—è –ª–∏–Ω–∏—è - –≤–µ—Ö–∞ (–º–∏–ª—Å—Ç–æ—É–Ω)</li>
            <li>–û—Ç—Å—Ç—É–ø—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é –∑–∞–¥–∞—á (4 —É—Ä–æ–≤–Ω—è)</li>
            <li>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞</li>
            <li>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É [+] –∏–ª–∏ [-] –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤</li>
        </ul>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã
        const timeline = document.getElementById('timeline');
        for(let i = 1; i <= 30; i++) {
            const day = document.createElement('div');
            day.className = 'day';
            day.textContent = i;
            timeline.appendChild(day);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤
        function createIndent(level) {
            const spacesPerLevel = 4;
            let indent = '';
            for (let i = 1; i < level; i++) {
                indent += '&nbsp;'.repeat(spacesPerLevel);
            }
            return indent;
        }

        // –î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
        const tasksData = [
            // === –†–ê–ó–î–ï–õ 1 ===
            { id: 1, level: 1, label: '1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞', start: 0, duration: 12, phase: 1, parentId: null },
            
            { id: 6, level: 2, label: '1.1. –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 0, duration: 6, phase: 1, parentId: 1 },
            { id: 9, level: 3, label: '1.1.1. –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π', start: 0, duration: 3, phase: 1, parentId: 6 },
            { id: 12, level: 4, label: '1.1.1.1. –ò–∑—É—á–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π', start: 0, duration: 2, phase: 1, parentId: 9 },
            { id: 13, level: 4, label: '1.1.1.2. –ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π', start: 1, duration: 2, phase: 1, parentId: 9 },
            { id: 14, level: 4, label: '1.1.1.3. –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö', start: 2, duration: 1, phase: 1, parentId: 9 },
            { id: 10, level: 3, label: '1.1.2. –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤', start: 2, duration: 2, phase: 1, parentId: 6 },
            { id: 11, level: 3, label: '1.1.3. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –ø–æ –Ω–µ—è—Å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º', start: 3, duration: 3, phase: 1, parentId: 6 },
            
            { id: 7, level: 2, label: '1.2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏', start: 4, duration: 8, phase: 1, parentId: 1 },
            { id: 15, level: 3, label: '1.2.1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 4, duration: 3, phase: 1, parentId: 7 },
            { id: 16, level: 3, label: '1.2.2. –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 5, duration: 2, phase: 1, parentId: 7 },
            { id: 17, level: 3, label: '1.2.3. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤', start: 6, duration: 4, phase: 1, parentId: 7 },
            
            { id: 8, level: 2, label: '1.3. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã', start: 6, duration: 6, phase: 1, parentId: 1 },
            { id: 18, level: 3, label: '1.3.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π', start: 6, duration: 4, phase: 1, parentId: 8 },
            { id: 19, level: 3, label: '1.3.2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö', start: 8, duration: 3, phase: 1, parentId: 8 },
            { id: 20, level: 3, label: '1.3.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 9, duration: 3, phase: 1, parentId: 8 },

            // === –†–ê–ó–î–ï–õ 2 ===
            { id: 2, level: 1, label: '2. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤', start: 8, duration: 14, phase: 2, parentId: null },
            
            { id: 21, level: 2, label: '2.1. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤', start: 8, duration: 10, phase: 2, parentId: 2 },
            { id: 24, level: 3, label: '2.1.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤', start: 8, duration: 6, phase: 2, parentId: 21 },
            { id: 27, level: 4, label: '2.1.1.1. –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏', start: 8, duration: 3, phase: 2, parentId: 24 },
            { id: 28, level: 4, label: '2.1.1.2. –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏', start: 10, duration: 3, phase: 2, parentId: 24 },
            { id: 29, level: 4, label: '2.1.1.3. –ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏', start: 11, duration: 2, phase: 2, parentId: 24 },
            { id: 25, level: 3, label: '2.1.2. –°–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫-–ª–∏—Å—Ç–æ–≤ –¥–ª—è Ad-hoc', start: 10, duration: 4, phase: 2, parentId: 21 },
            { id: 26, level: 3, label: '2.1.3. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤', start: 12, duration: 6, phase: 2, parentId: 21 },
            
            { id: 22, level: 2, label: '2.2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö', start: 12, duration: 8, phase: 2, parentId: 2 },
            { id: 30, level: 3, label: '2.2.1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–±–æ—Ä–æ–≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö', start: 12, duration: 5, phase: 2, parentId: 22 },
            { id: 31, level: 3, label: '2.2.2. –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö', start: 14, duration: 3, phase: 2, parentId: 22 },
            { id: 32, level: 3, label: '2.2.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö', start: 15, duration: 5, phase: 2, parentId: 22 },
            
            { id: 23, level: 2, label: '2.3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏', start: 15, duration: 7, phase: 2, parentId: 2 },
            { id: 33, level: 3, label: '2.3.1. –ù–∞–ø–∏—Å–∞–Ω–∏–µ UI-—Ç–µ—Å—Ç–æ–≤', start: 15, duration: 4, phase: 2, parentId: 23 },
            { id: 34, level: 3, label: '2.3.2. –ù–∞–ø–∏—Å–∞–Ω–∏–µ API-—Ç–µ—Å—Ç–æ–≤', start: 17, duration: 3, phase: 2, parentId: 23 },
            { id: 35, level: 3, label: '2.3.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD', start: 19, duration: 3, phase: 2, parentId: 23 },

            // === –†–ê–ó–î–ï–õ 3 ===
            { id: 3, level: 1, label: '3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 15, duration: 20, phase: 3, parentId: null },
            
            { id: 36, level: 2, label: '3.1. –û—Å–Ω–æ–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π', start: 15, duration: 12, phase: 3, parentId: 3 },
            { id: 39, level: 3, label: '3.1.1. –ü—Ä–æ–≥–æ–Ω —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π', start: 15, duration: 8, phase: 3, parentId: 36 },
            { id: 40, level: 3, label: '3.1.2. –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', start: 18, duration: 6, phase: 3, parentId: 36 },
            { id: 41, level: 3, label: '3.1.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤', start: 20, duration: 7, phase: 3, parentId: 36 },
            
            { id: 37, level: 2, label: '3.2. –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', start: 20, duration: 10, phase: 3, parentId: 3 },
            { id: 42, level: 3, label: '3.2.1. –ü—Ä–æ–≥–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤', start: 20, duration: 6, phase: 3, parentId: 37 },
            { id: 43, level: 3, label: '3.2.2. –ü—Ä–æ–≥–æ–Ω —Ä—É—á–Ω—ã—Ö —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤', start: 23, duration: 5, phase: 3, parentId: 37 },
            { id: 44, level: 3, label: '3.2.3. Smoke-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', start: 25, duration: 5, phase: 3, parentId: 37 },
            
            { id: 38, level: 2, label: '3.3. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', start: 25, duration: 10, phase: 3, parentId: 3 },
            { id: 45, level: 3, label: '3.3.1. –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', start: 25, duration: 5, phase: 3, parentId: 38 },
            { id: 46, level: 3, label: '3.3.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏', start: 27, duration: 4, phase: 3, parentId: 38 },
            { id: 47, level: 3, label: '3.3.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏', start: 29, duration: 6, phase: 3, parentId: 38 },

            // === –†–ê–ó–î–ï–õ 4 ===
            { id: 4, level: 1, label: '4. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å', start: 25, duration: 10, phase: 4, parentId: null },
            
            { id: 48, level: 2, label: '4.1. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', start: 25, duration: 6, phase: 4, parentId: 4 },
            { id: 51, level: 3, label: '4.1.1. –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞', start: 25, duration: 4, phase: 4, parentId: 48 },
            { id: 52, level: 3, label: '4.1.2. –û—Ü–µ–Ω–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏', start: 27, duration: 3, phase: 4, parentId: 48 },
            { id: 53, level: 3, label: '4.1.3. –ê–Ω–∞–ª–∏–∑ –¥–µ—Ñ–µ–∫—Ç–æ–≤', start: 28, duration: 3, phase: 4, parentId: 48 },
            
            { id: 49, level: 2, label: '4.2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏', start: 28, duration: 7, phase: 4, parentId: 4 },
            { id: 54, level: 3, label: '4.2.1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –æ —Å—Ç–∞—Ç—É—Å–µ', start: 28, duration: 5, phase: 4, parentId: 49 },
            { id: 55, level: 3, label: '4.2.2. –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏', start: 31, duration: 4, phase: 4, parentId: 49 },
            { id: 56, level: 3, label: '4.2.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É', start: 33, duration: 2, phase: 4, parentId: 49 },
            
            { id: 50, level: 2, label: '4.3. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏', start: 30, duration: 5, phase: 4, parentId: 4 },

            // === –†–ê–ó–î–ï–õ 5 ===
            { id: 5, level: 1, label: '5. –ó–∞–≤–µ—Ä—à–∞—é—â–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏', start: 30, duration: 8, phase: 5, parentId: null },
            
            { id: 57, level: 2, label: '5.1. –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏', start: 30, duration: 5, phase: 5, parentId: 5 },
            { id: 60, level: 3, label: '5.1.1. –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏', start: 30, duration: 3, phase: 5, parentId: 57 },
            { id: 61, level: 3, label: '5.1.2. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è', start: 32, duration: 2, phase: 5, parentId: 57 },
            { id: 62, level: 3, label: '5.1.3. –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤', start: 33, duration: 2, phase: 5, parentId: 57 },
            
            { id: 58, level: 2, label: '5.2. –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —É—Ä–æ–∫–æ–≤', start: 33, duration: 4, phase: 5, parentId: 5 },
            { id: 63, level: 3, label: '5.2.1. –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞', start: 33, duration: 2, phase: 5, parentId: 58 },
            { id: 64, level: 3, label: '5.2.2. –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã', start: 34, duration: 2, phase: 5, parentId: 58 },
            { id: 65, level: 3, label: '5.2.3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤', start: 35, duration: 2, phase: 5, parentId: 58 },
            
            { id: 59, level: 2, label: '5.3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–ª–∏–∑–∞', start: 35, duration: 3, phase: 5, parentId: 5 },
            { id: 66, level: 3, label: '5.3.1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞', start: 35, duration: 2, phase: 5, parentId: 59 },
            { id: 67, level: 3, label: '5.3.2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–≤—ã—Ö –¥–Ω–µ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏', start: 36, duration: 2, phase: 5, parentId: 59 },

            // –í–µ—Ö–∞
            { id: 100, level: 4, label: 'üö© –†–µ–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞', start: 35, duration: 1, phase: 0, milestone: true, parentId: null }
        ];

        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
        const tasksContainer = document.getElementById('tasks');
        const taskElements = new Map();

        tasksData.forEach(task => {
            const taskElement = document.createElement('div');
            taskElement.className = `task level-${task.level}`;
            taskElement.dataset.id = task.id;
            taskElement.dataset.parentId = task.parentId;
            taskElement.dataset.level = task.level;

            const label = document.createElement('div');
            label.className = 'task-label';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–¥–∞—á —Å –¥–µ—Ç—å–º–∏ (—É—Ä–æ–≤–Ω–∏ 1-3)
            let collapseIcon = '';
            if (task.level < 4 && !task.milestone) {
                collapseIcon = `<span class="collapse-icon"></span>`;
            } else {
                collapseIcon = '<span style="display:inline-block; width:18px;"></span>';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –ø–µ—Ä–µ–¥ —Ç–µ–∫—Å—Ç–æ–º
            const indent = createIndent(task.level);
            label.innerHTML = indent + collapseIcon + task.label;
            label.title = task.label;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
            if (task.level < 4 && !task.milestone) {
                label.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleTask(task.id);
                });
            }

            const barContainer = document.createElement('div');
            barContainer.className = 'task-bar-container';
            
            const bar = document.createElement('div');
            const barClass = task.milestone ? 'task-bar milestone' : `task-bar phase-${task.phase}`;
            bar.className = barClass;
            bar.style.left = `${task.start * 40}px`;
            bar.style.width = `${task.duration * 40}px`;
            bar.title = `${task.label}: ${task.duration} –¥–Ω–µ–π (–¥–Ω–∏ ${task.start + 1}-${task.start + task.duration})`;
            
            barContainer.appendChild(bar);
            taskElement.appendChild(label);
            taskElement.appendChild(barContainer);
            tasksContainer.appendChild(taskElement);
            
            taskElements.set(task.id, taskElement);
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞—á–∏ (—Å–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)
        function toggleTask(taskId) {
            const taskElement = taskElements.get(parseInt(taskId));
            if (!taskElement) return;

            const isCollapsed = taskElement.classList.contains('collapsed');
            
            if (isCollapsed) {
                // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
                taskElement.classList.remove('collapsed');
                showChildren(taskId);
            } else {
                // –°–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
                taskElement.classList.add('collapsed');
                hideChildren(taskId);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∑–∞–¥–∞—á
        function hideChildren(parentId) {
            tasksData.forEach(task => {
                if (task.parentId === parentId) {
                    const childElement = taskElements.get(task.id);
                    if (childElement) {
                        childElement.classList.add('hidden');
                        // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –¥–µ—Ç–µ–π —ç—Ç–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
                        hideChildren(task.id);
                    }
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö –∑–∞–¥–∞—á
        function showChildren(parentId) {
            tasksData.forEach(task => {
                if (task.parentId === parentId) {
                    const childElement = taskElements.get(task.id);
                    if (childElement) {
                        childElement.classList.remove('hidden');
                        // –ï—Å–ª–∏ —ç—Ç–æ—Ç —Ä–µ–±–µ–Ω–æ–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ –¥–µ—Ç–µ–π
                        if (!childElement.classList.contains('collapsed')) {
                            showChildren(task.id);
                        }
                    }
                }
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –∑–∞–¥–∞—á–∞–º–∏
        function expandAll() {
            taskElements.forEach((element, id) => {
                element.classList.remove('collapsed');
                element.classList.remove('hidden');
            });
        }

        function collapseAll() {
            taskElements.forEach((element, id) => {
                const level = parseInt(element.dataset.level);
                if (level < 4) {
                    element.classList.add('collapsed');
                }
                if (level > 1) {
                    element.classList.add('hidden');
                }
            });
        }

        // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è: —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
        function expandToLevel(targetLevel) {
            taskElements.forEach((element, id) => {
                const level = parseInt(element.dataset.level);
                
                if (level <= targetLevel) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∑–∞–¥–∞—á–∏ –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                    element.classList.remove('hidden');
                    element.classList.remove('collapsed');
                } else {
                    // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–¥–∞—á–∏ –Ω–∏–∂–µ —Ü–µ–ª–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                    element.classList.add('hidden');
                }
                
                // –î–ª—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á –≤—ã—à–µ —Ü–µ–ª–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                if (level < targetLevel && level < 4) {
                    element.classList.remove('collapsed');
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –¥–µ—Ç–µ–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–æ —Ü–µ–ª–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                    showChildrenUpToLevel(id, targetLevel);
                }
                
                // –î–ª—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ - —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∏—Ö
                if (level === targetLevel && level < 4) {
                    element.classList.add('collapsed');
                    hideChildren(id);
                }
            });
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–µ–π –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
        function showChildrenUpToLevel(parentId, targetLevel) {
            tasksData.forEach(task => {
                if (task.parentId === parentId) {
                    const childElement = taskElements.get(task.id);
                    if (childElement) {
                        const childLevel = parseInt(childElement.dataset.level);
                        
                        if (childLevel <= targetLevel) {
                            childElement.classList.remove('hidden');
                            
                            // –ï—Å–ª–∏ —ç—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞ –∏ –º—ã –µ—â–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
                            if (childLevel < targetLevel && childLevel < 4) {
                                childElement.classList.remove('collapsed');
                                showChildrenUpToLevel(task.id, targetLevel);
                            }
                            
                            // –ï—Å–ª–∏ —ç—Ç–æ —Ü–µ–ª–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞ - —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º
                            if (childLevel === targetLevel && childLevel < 4) {
                                childElement.classList.add('collapsed');
                                hideChildren(task.id);
                            }
                        }
                    }
                }
            });
        }

        // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∑–∞–¥–∞—á–∏
        expandAll();
    </script>
</body>
</html>