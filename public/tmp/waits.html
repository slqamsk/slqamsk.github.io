<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Явные ожидания</title>
</head>
<body>
  <header>
    <h1>Явные ожидания</h1>
    <div class="controls"></div>
  </header>

  <h2>1. Предварительное задание.</h2>

  <p>Создайте новый проект ExplicitWaits. Выполните 2 команды: </p>

  <pre><code class="language-batch">
python -m pip install --upgrade pip
  </code></pre>

  <pre><code class="language-batch">
pip install pytest selenium
  </code></pre>

  <p>В проекте ExplicitWaits создайте папку tests, в ней файл для тестов test_explicit_waits.py, 
    добавьте в этот файл тест, который откроет страницу: 
    <a href="https://slqamsk.github.io/tmp/dl_hidden.html">https://slqamsk.github.io/tmp/dl_hidden.html</a>, 
    нажмёт кнопку показать и проверит, что элемент с id равным message видим на странице. <br>
    Запустите автотест, убедитесь, что без наличия явных ожиданий возникает ошибка.
  </p>

  <h2>2. Пример. Создание явного ожидания - видимость.</h2>
  <p>
    Для страницы <a href="https://slqamsk.github.io/tmp/dl_hidden.html">https://slqamsk.github.io/tmp/dl_hidden.html</a> 
    напишите автотест, который нажмёмт на кнопку "Показать", дождётся, что элемент с id равным message станет видимым и проверит, что он видимый. 
  </p>
  <pre class="line-numbers"><code class="language-python"># -*- coding: utf-8 -*-
# файл: test_explicit_waits.py
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions

# URL тестовой страницы
URL = "https://slqamsk.github.io/tmp/dl_hidden.html"

def test_dl_hidden():
    # Инициализация драйвера Chrome
    driver = webdriver.Chrome()
    # Ожидание с таймаутом 10 секунд
    wait = WebDriverWait(driver, 10)
    # Локатор элемента с сообщением
    locator = (By.ID, "message")
    # Открытие тестовой страницы
    driver.get(URL)
    # Нажатие кнопки "Показать"
    driver.find_element(By.ID, "showBtn").click()
    # Ожидание видимости элемента
    condition = expected_conditions.visibility_of_element_located(locator)
    wait.until(condition)
    # Проверка, что элемент отображается
    assert driver.find_element(*locator).is_displayed()
    # Закрытие браузера (неявно происходит при завершении функции)
    driver.quit()
  </code></pre>


  <h2>3. Пример. Создание явного ожидания - невидимость.</h2>
  <p>
    Для предыдущего примера добавьте в конце автотеста нажатие кнопки "Скрыть" и проверки, что элемент с id равным message стал невидимым.
  </p>
  <pre class="line-numbers"><code class="language-python"># -*- coding: utf-8 -*-
# файл: test_explicit_waits.py
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions

# URL тестовой страницы
URL = "https://slqamsk.github.io/tmp/dl_hidden.html"

def test_dl_hidden():
    # Инициализация драйвера Chrome
    driver = webdriver.Chrome()
    # Ожидание с таймаутом 10 секунд
    wait = WebDriverWait(driver, 10)
    # Локатор элемента с сообщением
    locator = (By.ID, "message")
    # Открытие тестовой страницы
    driver.get(URL)
    # Нажатие кнопки "Показать"
    driver.find_element(By.ID, "showBtn").click()
    # Ожидание видимости элемента
    condition = expected_conditions.visibility_of_element_located(locator)
    wait.until(condition)
    # Проверка, что элемент отображается
    assert driver.find_element(*locator).is_displayed()
    # Нажатие кнопки "Скрыть"
    driver.find_element(By.ID, "hideBtn").click()
    # Ожидание невидимости элемента
    condition = expected_conditions.invisibility_of_element_located(locator)
    wait.until(condition)
    # Проверка, что элемент не отображается
    assert not driver.find_element(*locator).is_displayed()
    # Закрытие браузера (неявно происходит при завершении функции)
    driver.quit()
  </code></pre>

  <h2>4. Пример. Создание явного ожидания - существование элемента.</h2>
  <p>
    Для страницы <a href="https://slqamsk.github.io/tmp/dl_removed.html">https://slqamsk.github.io/tmp/dl_removed.html</a> 
    напишите автотест, который нажмёмт на кнопку "Добавить", дождётся, что элемент с id равным message появится 
    и проверит, что он появился. 
   </p>
  <pre class="line-numbers"><code class="language-python"># -*- coding: utf-8 -*-
# файл: test_sorting_hat.py
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions

# URL тестовой страницы
URL_HIDDEN = "https://slqamsk.github.io/tmp/dl_hidden.html"
URL_REMOVED = "https://slqamsk.github.io/tmp/dl_removed.html"
def test_dl_removed():
    # Инициализация драйвера Chrome
    driver = webdriver.Chrome()
    # Ожидание с таймаутом 10 секунд
    wait = WebDriverWait(driver, 10)
    # Локатор элемента с сообщением
    locator = (By.ID, "message")
    # Открытие тестовой страницы
    driver.get(URL_REMOVED)
    # Нажатие кнопки "Показать"
    driver.find_element(By.ID, "addBtn").click()
    # Ожидание появления элемента
    condition = expected_conditions.presence_of_element_located(locator)
    wait.until(condition)
    # Проверка, что элемента нет
    elements = driver.find_elements(*locator)
    assert len(elements) == 1
    # Закрытие браузера (неявно происходит при завершении функции)
    driver.quit()
  </code></pre>

    <h2>5. Пример. Создание явного ожидания - исчезновение элемента.</h2>
  <p>
    Для предыдущего примера добавьте в конце автотеста нажатие кнопки "Удалить" и проверки, 
    что элемент с id равным message исчез со страницы.
  </p>
  <pre class="line-numbers"><code class="language-python"># -*- coding: utf-8 -*-
# файл: test_sorting_hat.py
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions

# URL тестовой страницы
URL_HIDDEN = "https://slqamsk.github.io/tmp/dl_hidden.html"
URL_REMOVED = "https://slqamsk.github.io/tmp/dl_removed.html"
def test_dl_removed():
    # Инициализация драйвера Chrome
    driver = webdriver.Chrome()
    # Ожидание с таймаутом 10 секунд
    wait = WebDriverWait(driver, 10)
    # Локатор элемента с сообщением
    locator = (By.ID, "message")
    # Открытие тестовой страницы
    driver.get(URL_REMOVED)
    # Нажатие кнопки "Показать"
    driver.find_element(By.ID, "addBtn").click()
    # Ожидание появления элемента
    condition = expected_conditions.presence_of_element_located(locator)
    wait.until(condition)
    # Проверка, что элемента нет
    elements = driver.find_elements(*locator)
    assert len(elements) == 1
    # Нажатие кнопки "Скрыть"
    driver.find_element(By.ID, "removeBtn").click()
    # Ожидание, когда элемент пропадёт
    condition = expected_conditions.presence_of_element_located(locator)
    wait.until_not(condition)
    # Проверка, что элемент есть
    elements = driver.find_elements(*locator)
    assert len(elements) == 0
    # Закрытие браузера (неявно происходит при завершении функции)
    driver.quit()
  </code></pre>

  <h2>6. Самостоятельное задание на ожидание видимости элемента</h2>
  <p>
    Для страницы <a href="https://the-internet.herokuapp.com/dynamic_loading/1">
      https://the-internet.herokuapp.com/dynamic_loading/1</a> 
    напишите автотест, который нажмёмт на кнопку "Start", дождётся, 
    что появился текст Hello World! 
   </p>

  <h2>7. Самостоятельное задание на ожидание появления элемента</h2>
  <p>
    Для страницы <a href="https://the-internet.herokuapp.com/dynamic_loading/2">
      https://the-internet.herokuapp.com/dynamic_loading/2</a> 
    напишите автотест, который нажмёмт на кнопку "Start", дождётся, 
    что появился текст Hello World! 
   </p>


  <h2>8. Самостоятельное задание на ожидание появления элемента</h2>
  <p>
    Для страницы <a href="https://the-internet.herokuapp.com/dynamic_controls">
      https://the-internet.herokuapp.com/dynamic_controls</a> 
    напишите автотест, который нажмёмт на кнопки "Remove", "Add" и дождётся, 
    удаления, появления элемента чек-бокс.
   </p>

  <h2>9. Самостоятельное задание на ожидание доступности элемента</h2>
  <p>
    Для страницы <a href="https://the-internet.herokuapp.com/dynamic_controls">
      https://the-internet.herokuapp.com/dynamic_controls</a> 
    напишите автотест, который нажмёмт на кнопки "Enable" и дождётся, 
    когда поле редактирования станет доступным для редактирования и после этого 
    напечатайте в нём своё имя.
   </p>

  <script src="scripts.js"></script>
</body>
</html>